(function($){var methods={ratio:function(args){var item=args.item,settings=args.settings;var height=item.get(0).height,width=item.get(0).width;if(height===0){height=width;}
return{w:width/settings.wrapperWidth,h:height/settings.wrapperHeight};},center:function(longVal,shortVal){return parseInt((longVal-shortVal)/2,10);},scaleToFill:function(args){var item=args.item,settings=args.settings,ratio=settings.ratio,width=item.get(0).width,height=item.get(0).height,offset={top:0,left:0};if(height===0){height=width;}
if(ratio.h>ratio.w){width=settings.wrapperWidth;height=height/ratio.w;if(settings.center){offset.top=(settings.wrapperHeight-height)/2;}}else{height=settings.wrapperHeight;width=width/ratio.h;if(settings.center){offset.left=(settings.wrapperWidth-width)/2;}}
if(settings.center){args.wrapper.css('position','relative');item.css({'position':'absolute','top':offset.top+'px','left':offset.left+'px'});}},scaleToFit:function(args){var item=args.item,settings=args.settings,ratio=settings.ratio,width=item.get(0).width,height=item.get(0).height,offset={top:0,left:0};if(height===0){height=width;}
var newHeight,newWidth;if(ratio.h>ratio.w){newHeight=settings.wrapperHeight,newWidth=parseInt((width*settings.wrapperHeight)/height,10);if(settings.center){offset.left=(settings.wrapperWidth-newWidth)/2;}}else{newHeight=parseInt((height*settings.wrapperWidth)/width,10),newWidth=settings.wrapperWidth;if(settings.center){offset.top=(settings.wrapperHeight-newHeight)/2;}}
args.wrapper.css({'width':(settings.squareWidth?settings.wrapperWidth:newWidth)+'px','height':settings.wrapperHeight+'px'});if(settings.center){args.wrapper.css('position','relative');item.css({'position':'absolute','top':offset.top+'px','left':offset.left+'px'});}},init:function(options){var settings=$.extend({wrapperSelector:null,wrapperWidth:100,wrapperHeight:100,autoGetWidth:true,ratioWrapper:null,widthSelector:null,center:true,fill:true,initClass:'fc-init',doneEvent:'fakedropdone',squareWidth:true,widthSelectorParent:null},options),_init=function(e){if($(this).index()===0){this.style.display='inline';}
if(settings.autoGetWidth){if(settings.widthSelectorParent){settings.wrapperWidth=$(this).parents(settings.widthSelectorParent).width();}else if(settings.widthSelector){settings.wrapperWidth=$(settings.widthSelector).width();}
if(settings.wrapperWidth<1){var root=$(this).parents('.tab-content');settings.wrapperWidth=root.find('.active '+settings.widthSelectorParent).width();}
settings.wrapperHeight=settings.wrapperWidth*settings.ratioWrapper.ratio_height/settings.ratioWrapper.ratio_width;}
var item=$(this),wrapper=settings.wrapperSelector?item.closest(settings.wrapperSelector):item.parent(),args={item:item,settings:settings,wrapper:wrapper};settings.ratio=methods.ratio(args);if(settings.fill){wrapper.css({'overflow':'hidden','width':settings.wrapperWidth+'px','height':settings.wrapperHeight+'px'});methods.scaleToFill(args);}else{methods.scaleToFit(args);}
item.data('fc.settings',settings).addClass(settings.initClass).trigger(settings.doneEvent);},images=this.filter('img'),others=this.filter(':not(img)');if(images.length){images.bind('load',function(){_init.call(this);}).each(function(){if(this.complete||this.complete===undefined){var src=this.src;this.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";this.src=src;}});}
if(others.length){others.each(_init);}
return this;}};$.fn.fakecrop=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}else{$.error('Method '+method+' does not exist on jQuery.fakecrop');}};})(jQuery);